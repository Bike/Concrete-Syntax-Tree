\chapter{Basic use}

In this chapter, we describe the basic functionality that \sysname{}
provides for manipulating concrete syntax trees.

\section{Protocol}

\Defclass {cst}

This class is the base class for all concrete syntax trees.

\Definitarg {:raw}

The value of this initialization argument is the raw \commonlisp{}
expression that this concrete syntax tree represents.

\Defgeneric {raw} {cst}

This generic function returns the raw \commonlisp{} expression that is
represented by \textit{cst} as provide by the
initialization argument \texttt{:raw} when \textit{cst} was
created.

\Definitarg {:parent}

This initialization argument is accepted by all subclasses of concrete
syntax trees.  If the syntax tree is a top-level syntax tree, then
\texttt{nil} should be provided as the value for this initialization
argument.  Otherwise, the value should be the concrete syntax tree
that is the parent of this one.

\Definitarg {:source}

This initialization argument is accepted by all subclasses of concrete
syntax trees.  The value of this initialization argument is a
client-specific object that indicates the origin of the source code
represented by this concrete syntax tree.  A value of \texttt{nil}
indicates that the origin of the source code represented by this concrete
syntax tree is unknown.  The default value (if this initialization
argument is not provided) is \texttt{nil}.

\Defgeneric {parent} {cst}

This generic function returns the parent of \textit{cst} as provide by
the initialization argument \texttt{:parent} when \textit{cst} was
created.

\Defgeneric {source} {cst}

This generic function returns the origin information of \textit{cst}
as provide by the initialization argument \texttt{:source} when
\textit{cst} was created.

\Defgeneric {null} {cst}

This generic function returns \emph{true} if and only if \textit{cst}
is an instance of the class \texttt{atom-cst} that has \texttt{nil} as
its raw value.  Otherwise, it returns \emph{false}.

\Defclass {cons-cst}

This class is a subclass of the class \texttt{cst}.

\Definitarg {:first}

The value of this initialization argument is the concrete syntax tree
that represents the \texttt{car} of the raw \commonlisp{} expression
represented by this concrete syntax tree.

\Definitarg {:rest}

The value of this initialization argument is the concrete syntax tree
that represents the \texttt{cdr} of the raw \commonlisp{} expression
represented by this concrete syntax tree.

\Defgeneric {first} {cons-cst}

This generic function returns the concrete syntax tree that represents
the \texttt{car} of the raw \commonlisp{} expression represented by
\textit{cons-cst}.

\Defgeneric {rest} {cons-cst}

This generic function returns the concrete syntax tree that represents
the \texttt{cdr} of the raw \commonlisp{} expression represented by
\textit{cons-cst}.

\Defgeneric {consp} {cst}

This generic function returns \emph{true} if and only if \textit{cst}
is an instance of the class \texttt{cons-cst}.  Otherwise, it returns
\emph{false}.

\section{Additional API functions}

\Defgeneric {second} {cons-cst}

\Defgeneric {third} {cons-cst}

\Defgeneric {fourth} {cons-cst}

\Defgeneric {fifth} {cons-cst}

\Defgeneric {sixth} {cons-cst}

\Defgeneric {seventh} {cons-cst}

\Defgeneric {eighth} {cons-cst}

\Defgeneric {ninth} {cons-cst}

\Defgeneric {tenth} {cons-cst}
